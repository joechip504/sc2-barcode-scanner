<!DOCTYPE html>
<html>
    <head>
        {% block dependencies %} {% endblock %}
        <meta charset="utf-8">
        <title>Upload a file in Django 1.5 using Dropzone.js</title>
        {% load staticfiles %}
        <link href="{% static 'main/css/dropzone.css' %}" type="text/css" rel="stylesheet"/>
        <link href="{% static 'main/css/animate.css' %}" type="text/css" rel="stylesheet"/>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <link rel="stylesheet" href="https://storage.googleapis.com/code.getmdl.io/1.0.6/material.indigo-pink.min.css">
        <script src="https://storage.googleapis.com/code.getmdl.io/1.0.6/material.min.js"></script>
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    </head>
    <body>

        <!-- IMPORTANT enctype attribute! -->
        <form class="dropzone" action="{% url "main:home" %}" method="post" enctype="multipart/form-data" id="myDropzone">
            {% csrf_token %}
        </form>

        <script src="{% static 'main/js/dropzone.js' %}"></script>
        <script type="text/javascript">
            Dropzone.options.myDropzone = {

                // Prevents/enables Dropzone from uploading dropped files immediately
                autoProcessQueue : true,

                init: function() {
                  this.on("addedfile", function(file) {
                    console.log("hello");
                  });

                  this.on("success", function(file, response) {
                    console.log(file);
                    console.log(response);
                    var results_block = document.getElementById("results");
                    results_block.innerHTML = response;
                  });
                }
            };
        </script>

        <div id="results">
            {% block results %} {% endblock %}
        </div>

    </body>
</html>
